# PLEASE READ (I REPEAT, PLEASE READ): this YAML document collects and describes all
# OpenQuake GSIMs parameters and how they should be represented as columns of
# user-defined flat files. See also `gsim_params.py` and `models.FlatfileColumn`

# GSIM parameter format:
#
# <parameter_name>:
#   flatfile_name: the flat file column name. Default when missing: null, which
#            means no associated flat file column and thus that the
#            parameter and the GSIMs requiring it will be *deliberately*
#            ignored in eGSIM (see `_egsim_oq.py`)
#   dtype:   The data type (default when missing: float). Supported values are:
#            float, int, str, datetime, bool, or the list of the possible values
#            that the field can have (categorical data)
#   bounds:  The bounds [min, max], endpoints included. Default when missing:
#            [null, null], where null means: unbounded / don't check
#   default: The default value when nothing is provided. When missing,
#            the default value depends on dtype or storage (e.g. pandas vs sql).
#            E.g., with pandas: NaN (float), NaT (datetime), None/null
#            (str or categorical), 0 (int), False (bool)
#   help:    The field help or description (when missing defaults to "")

# As you see below, all parameters must be added in one of the following top-level
# categories: REQUIRES_DISTANCES (distance measure),
# REQUIRES_RUPTURE_PARAMETERS (rupture parameter), REQUIRES_SITES_PARAMETERS (site parameter).

# YAML notes:
# Unless required, strings do not need to be quoted. YAML is a superset of JSON,
# so you can type lists as JSON Arrays: [...], Mappings as JSON Objects: {...}.
# If you want to type over multiple lines for readability, prefix the text with >-
# (see examples here below or https://stackoverflow.com/a/3790497)


REQUIRES_DISTANCES:  # Distance parameters
  azimuth:
    flatfile_name: azimuth
  repi:
    flatfile_name: repi
    help: epicentral distance (in km)
  rrup:
    flatfile_name: rrup
    help: rupture_distance (in km)
  rjb:
    flatfile_name: rjb
    help: Joyner-Boore distance (in km)
  rhypo:
    flatfile_name: rhypo
    help: hypocentral distance (in km)
  rx:
    flatfile_name: rx
    help: >-
      Horizontal distance (in km) from the top of the rupture measured
      perpendicular to strike
  ry0:
    flatfile_name: ry0
    help: >-
      Horizontal distance (in km) from the top of the rupture measured parallel
      to strike
  rvolc:
    flatfile_name: rvolc
    default: 0
    help: Distance through volcanic zone (km)
  # Parameters wit no flatfile mapping:
  rcdpp:


REQUIRES_RUPTURE_PARAMETERS:  # Rupture parameters
  hypo_lat:
    flatfile_name: event_latitude
    help: event latitude (deg)
    bounds: [ -90, 90 ]
  hypo_lon :
    flatfile_name: event_longitude
    help: event longitude (deg)
    bounds: [ -180, 180 ]
  mag:
    flatfile_name: magnitude
  hypo_depth:
    flatfile_name: hypocenter_depth
    help: Hypocentral depth (km)
  ztor:
    flatfile_name: depth_top_of_rupture
    help: Top of Rupture Depth (km)
    bounds: [ 0, null ]
  width:
    flatfile_name: rupture_width
    help: Down-dip width of the rupture (km)
    bounds: [ 0, null ]
  dip:
    flatfile_name: dip
    bounds: [ 0, 90 ]
    help: >-
      the angle of the fault relative to the horizontal (deg).
      Hint: in case of more components available (e.g. from web services), the
      correct one should be inferred by the user from the rupture, or can be chosen
      randomly if no information is available
  rake:
    flatfile_name: rake
    bounds: [ -180, 180 ]
    help: >-
      the direction the hanging wall moves, relative to the fault strike (deg).
      Hint: in case of more components available (e.g. from
      web services), the correct one should be inferred by the user from the rupture,
      or can be chosen randomly if no information is available

REQUIRES_SITES_PARAMETERS:  # Site parameters
  z1pt0:
    flatfile_name: z1
    help: >-
      depth of the layer where seismic waves start to propagate with a
      speed above 1.0 km/sec, in meters
  z2pt5:
    flatfile_name: z2pt5
    help: >-
      depth of the layer where seismic waves start to propagate with a speed
      above 2.5 km/sec, in km
  vs30:
    flatfile_name: vs30
    help: Average shear wave velocity in the top 30 m, in m/s
    bounds: [ 0, null ]
  backarc:
    flatfile_name: backarc
    dtype: bool
    default: false
  lat:
    flatfile_name: station_latitude
    help: station latitude (deg)
    bounds: [ -90, 90 ]
  lon:
    flatfile_name: station_longitude
    help: station longitude (deg)
    bounds: [ -180, 180 ]
  vs30measured:
    flatfile_name: vs30measured  # vs30_measured
    help: whether or not the Vs30 is measured (default true)
    dtype: bool
    default: true
  xvf:
    flatfile_name: xvf
    help: distance to the volcanic front (km)
  fpeak:
    flatfile_name: fpeak
    help: >-
      Frequency that corresponds to the peak of the horizontal to vertical
      spectral ratio (Hz)
    bounds: [ 0, null ]
  region:
    flatfile_name: region
    dtype: int
    bounds: [ 0, 5 ]
    help: The ESHM2020 cluster region to which the site belongs
    default: 0
  geology:
    flatfile_name: geology
    help: geological classification of the site
    dtype: ["CENOZOIC", "HOLOCENE", "JURASSIC-TRIASSIC", "CRETACEOUS", "PALEOZOIC", "PLEISTOCENE", "PRECAMBRIAN", "UNKNOWN"]
    default: UNKNOWN
  slope:
    flatfile_name: slope
    help: The local slope of the station
    bounds: [ 1.0e-100, null ]  # 1.0e-100 is a workaround to tell: >0
  # Parameters wit no flatfile mapping:
  f0:
  z1pt4:
  ec8_p18:
  bas:
  siteclass:
  h800:
  ec8:
  soiltype:
