# Nginx configuration file template for serving static files (Gunicorn is delegated for the main app)
# Copied from https://djangodeployment.com/wp-content/uploads/2017/03/Django-deployment-cheatsheet.pdf
# INSTRUCTIONS:
# > cp $THIS_FILE /etc/nginx/sites-available/$DOMAIN
# Edit the copied file replacing all variables (starting with $) accordingly
# Configure and start the server:
# > cd /etc/nginx/sites-enabled
# > ln -s ../sites-available/$DOMAIN .
# > service nginx reload

server {
	listen 80;
	listen [::]:80;
	server_name $DOMAIN www.$DOMAIN;
	root /var/www/$DOMAIN;
	location / {
		proxy_pass http://localhost:8000;
		proxy_set_header Host $http_host;
	}
	location /static/ {
		alias /var/cache/$DJANGO_PROJECT/static/;
	}
	location /media/ {
		alias /var/opt/$DJANGO_PROJECT/media/;
	}
}

