<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: oop/data/data_display.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: oop/data/data_display.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** class to handle display of {@link Data} objects
 * @constructor 
 * @property _header a table header array, see @param header
 * @param {Object} header a table header array to be used when displaying the data as table, e.g. ['GMPE-Name', 'Rank', 'Weight', 'Period'] 
 **/
function DataDisplay(header = {})
{
    this._header = header;
}

/** sets or gets the to be displayed data object
 * @param {Data} data a {@link Data} object
 * @returns {Boolean|Data} 
 */
DataDisplay.prototype.data = function(data)
{
    if (typeof data === 'undefined') {
        return this._data;
    } else {
        this._data = data;
        return true;
    }
};

/** sets or gets the @param header object
 * @param {Object} header a table header array, see @ctor param header
 * @returns {Boolean|Object} 
 */
DataDisplay.prototype.header = function(header)
{
    if (typeof header === 'undefined') {
        return this._header;
    } else {
        this._header = header;
        return true;
    }
};

/** creates an html table string from a data object
 * @param {Data} data a data object containing the to be displayed data
 * @param {Style} style a style object that defines how the data is to be displayed
 * @returns {String} a html table
 */
DataDisplay.prototype.table_from_data = function(data, style)
{
    /* create table &amp; table header objects */
    var table = '',
        table_header = '',
        which = 'zone';
    /* print table head */
    table_header +=  '&lt;thead>&lt;tr>';
    /* iterate the table header */
    $.each(this._header, function(_, column_name) {
        table_header += '&lt;th>'+column_name+'&lt;/th>';
    });
    table_header += '&lt;/tr>&lt;/thead>';
    /* add the header to the table object */
    table += table_header;
    /* add table body */
    table += '&lt;tbody>&lt;tr>';
    
    $.each(data.data(), function(key, object) {
        /* append a new table section to the wrapper element */
        table_sub_header = '&lt;tr class="gfz_gmpe_tableheader" style="background-color:'+style.feature_style_definition_rgba(key, 50)+
            '" data-data-sort="'+which+'"'+ '" data-data-key="'+key+'">&lt;th colspan="4">'+key+'&lt;/th>&lt;/tr>';
        
        /* add a colored (by feature color) subheader to the table */
        table += table_sub_header;
        /** iterate this */
        $.each(object, function(index, entry) {
            /* retrieve array of keys from this iteration's data object 
             * do this every iteration, b/c the object's structure might change */
            keys = Object.keys(entry.feature());
            /* start a new row */
            var row_entries = '&lt;tr class="gfz_gmpe_tablerow"'+' data-data-sort="'+which+'" '+ 'data-data-key="'+key+'"';
            /* add the current data object's features as "data-" html attributes, we need this later
             * when working with the table's data */
            $.each(keys, function(k,v) {
                row_entries += ' data-entry-'+v+'="'+entry.feature(v)+'"';
            });
            row_entries += '">';
            /* iterate over entry feature keys */
            $.each( keys , function(k,v) {
                row_entries += '&lt;td>'+entry.feature(v)+'&lt;/td>';
            });
            /* append the built html block */
            table += row_entries + '&lt;/tr>';
        });
    });
    return table;
};


/** creates a Leaflet control object that can be put on the map
 * @param {Data} data a data object containing the to be displayed data
 * @param {Style} style a style object that defines how the data is to be displayed
 * @returns {Object} a Leaflet control object
 */
DataDisplay.prototype.infoview = function(data, style)
{
    var _info = L.control({
        position : 'bottomleft'
    });
    _info.onAdd = function(map) {
        this._div = L.DomUtil.create('div', 'info listview'); // create a div with a class "info"
        this._div.id = 'info';//divid?divid:""; // from param                                                                           
        this.update();
        return this._div;
    };
    _info.update = function(key) {
        if ( typeof key === 'undefined' ) { key = ''; }
        if ( typeof data !== 'undefined' &amp;&amp; Object.keys(data.data()).length > 0 ) {
            var content = '';
            /* prepare new table */
            content += '&lt;table id="gfz_gmpe_data_table" class="table table-striped table-bordered table-hover table-condensed">';
            content += '&lt;thead>&lt;tr style="background-color:'+style.feature_style_definition_rgba(key, 50)+'">&lt;th colspan="4" data-data-key="'+key+'">'+
                       key+'&lt;/th>&lt;/tr>&lt;/thead>';
            /* print table head */
            content += '&lt;thead>&lt;tr>';
            content += '&lt;th>GMPE-Name&lt;/th>&lt;th>Rank&lt;/th>&lt;th>Weight&lt;/th>&lt;th>Period&lt;/th>';
            content += '&lt;/tr>&lt;/thead>';
            /* print table body */
            content += '&lt;tbody>&lt;tr>';
            
            $.each( data.data(key), function( index, result ) {
                infoclass = result.selected()?' info': '';
                content += '&lt;tr class="gfz_gmpe_info_tablerow'+infoclass+'" data-data-sort="infoview" data-data-key="'+
                           key+'" data-entry-GMPE-Name="'+result.feature("GMPE-Name")+'" data-entry-Period="'+result.feature("Period")+'">'+
                           '&lt;td>'+result.feature("GMPE-Name")+'&lt;/td>'+
                           '&lt;td>'+result.feature("Rank")+'&lt;/td>'+
                           '&lt;td>'+result.feature("Weight")+'&lt;/td>'+
                           '&lt;td>'+result.feature("Period")+'&lt;/td>'+
                           '&lt;/tr>';
            });
            
            content += '&lt;/tr>&lt;/tbody>';
            content += '&lt;/table>';
            _info._div.innerHTML = content;
            
        } else {
            // clear content          
            //this._div.innerHTML = '&lt;h4 id="gfz_gmpe_info_empty">Locations&lt;/h4>' +  (props ? content : 'shows something');
        }
    };
    return _info;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BaseLayer.html">BaseLayer</a></li><li><a href="Data.html">Data</a></li><li><a href="DataDisplay.html">DataDisplay</a></li><li><a href="Gmpe.html">Gmpe</a></li><li><a href="Ids.html">Ids</a></li><li><a href="JsonLayer.html">JsonLayer</a></li><li><a href="Layer.html">Layer</a></li><li><a href="LayerStyle.html">LayerStyle</a></li><li><a href="Legend.html">Legend</a></li><li><a href="Map.html">Map</a></li><li><a href="ShpJsonLayer.html">ShpJsonLayer</a></li><li><a href="Style.html">Style</a></li><li><a href="ZipFileReader.html">ZipFileReader</a></li></ul><h3>Mixins</h3><ul><li><a href="%257B@link%2520JsonLayer%257D%2520multi%2520inherits%2520from%2520%257B@link%2520Layer%257D%2520and%2520%257B@link%2520LayerStyle%257D%2520%250Aso%2520it%2520copies%2520over%2520%257B@link%2520LayerStyle%257D_s%2520protoype%2520members.html">{@link JsonLayer} multi inherits from {@link Layer} and {@link LayerStyle} 
so it copies over {@link LayerStyle}'s protoype members</a></li></ul><h3>Global</h3><ul><li><a href="global.html#bottom_entries">bottom_entries</a></li><li><a href="global.html#cb_data_ready">cb_data_ready</a></li><li><a href="global.html#feature_style_def">feature_style_def</a></li><li><a href="global.html#gmpe_table_add_row_clicklistener">gmpe_table_add_row_clicklistener</a></li><li><a href="global.html#gmpe_table_init">gmpe_table_init</a></li><li><a href="global.html#highlight_current_zone">highlight_current_zone</a></li><li><a href="global.html#ID_PREFIX">ID_PREFIX</a></li><li><a href="global.html#infoview_create">infoview_create</a></li><li><a href="global.html#init_variables">init_variables</a></li><li><a href="global.html#Instancestate">Instancestate</a></li><li><a href="global.html#MAP_ID">MAP_ID</a></li><li><a href="global.html#map_init">map_init</a></li><li><a href="global.html#map_modal_init">map_modal_init</a></li><li><a href="global.html#mydata_def">mydata_def</a></li><li><a href="global.html#mydatadisplay">mydatadisplay</a></li><li><a href="global.html#osm_attrib">osm_attrib</a></li><li><a href="global.html#SIDEBAR_ID">SIDEBAR_ID</a></li><li><a href="global.html#top_entries">top_entries</a></li><li><a href="global.html#topo_attrib">topo_attrib</a></li><li><a href="global.html#vector_shp_styling">vector_shp_styling</a></li><li><a href="global.html#zipfilereader">zipfilereader</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Tue May 30 2017 15:38:35 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
