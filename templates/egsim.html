{% extends 'base.html' %}

{% block head %}

{% with vue=True plotly=True leaflet=True axios=True fontawesome=True %}
{{ block.super }}
{% endwith %}
<!-- for tooltips https://kazzkiq.github.io/balloon.css/ -->
<link rel="stylesheet" type='text/css' href="https://unpkg.com/balloon-css/balloon.min.css">
<!-- custom css -->
<style>
/* navbar (top toolbar with menus): */
nav .menu-item{ cursor: pointer; color: #FFF; opacity: 0.66; }
nav > .menu-item{ margin-right: 1rem; }
nav > .menu-item:first-of-type{ margin-left: 1rem}
nav .menu-item.active, nav .menu-item:hover{ opacity: 1 !important; }
#options-menu { transition: transform .25s ease-out; transform-origin: top; }
@media (max-width: 1200px){  /* narrow  screen (< 1200px) */
	nav > .menu-item span { display: none !important; } /* hide menu texts */
}
/* waitbar. For info see: https://www.pexels.com/blog/css-only-loaders/ */
#waitdiv{ z-index: 200; }
.loader, .loader:before { height: 10px; }
.loader {
	width: 100%;
	position: relative;
	overflow: hidden;
	background-color: #999;
}
.loader:before{
	display: block;
	position: absolute;
	content: "";
	left: -200px;
	width: 200px;
	background-color: #ffc107; /*#a2cd7e;*/
	animation: loading 2s linear infinite;
}
@keyframes loading {
	from {left: -200px; width: 30%;}
	50% {width: 30%;}
	70% {width: 70%;}
	80% { left: 50%;}
	95% {left: 120%;}
	to {left: 100%;}
}
/* Transitions when activating a main component: https://vuejs.org/guide/built-ins/transition.html */
.fade-enter-active, .fade-leave-active { transition: opacity .4s ease-out; }
.fade-enter, .fade-leave-to { opacity: 0; }
.error-msg {
	flex: 1 1 auto;
	background-color: rgba(0,0,0,0);
	color: white;
	outline: none;
	border-width: 0px;
}
</style>

{% endblock %}


{% block body %}

<div class="d-flex flex-column bg-body" id='egsim-vue' style="height: 100vh;"></div>

{% endblock %}

{% block after-body %}

{{ block.super }}

<script>
axios.interceptors.request.use(function (config) {
	if (!('headers' in config)){
		config.headers = {};
	}
	config.headers["X-CSRFToken"] = "{{ csrf_token }}";
	return config;
});
</script>

<!-- VUE.JS: -->
<script type='text/javascript' src = "{% static 'js/egsim.js' %}"></script>
<!-- Components and dependencies of the EGISM app: -->
<script type='text/javascript' src="{% static 'js/v-components/base/field-input.js' %}"></script>
<script type='text/javascript' src="{% static 'js/v-components/base/gsim-select.js' %}"></script>
<script type='text/javascript' src="{% static 'js/v-components/base/egsim-form.js' %}"></script>
<script type='text/javascript' src="{% static 'js/v-components/base/plots-div.js' %}"></script>
<script type='text/javascript' src="{% static 'js/v-components/' %}flatfile.js"></script>
<script type='text/javascript' src="{% static 'js/v-components/' %}trellis.js"></script>
<script type='text/javascript' src="{% static 'js/v-components/' %}residuals.js"></script>
<script type='text/javascript' src="{% static 'js/v-components/' %}testing.js"></script>
<script>
/* mount the Vue App EGSIM. The function below returns an App instance (not used for the moment): */
EGSIM.mount('#egsim-vue');
</script>

{% endblock %}
